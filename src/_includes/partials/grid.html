<ul role="list" class="post-grid">
    {%- for post in collection | reverse -%}
    {%- if not (limit and loop.index > limit) -%}
    <li class="grid-card">
        <div class="grid-image">
            {% if post.templateContent %}
            {% set imgMatch = post.templateContent | match('src="(./photos/[^"]+)"') %}
            {% if imgMatch and imgMatch[1] %}
            <img
                src="{{ post.url }}{{ imgMatch[1] | replace('./', '') }}"
                alt="Post image"
                loading="lazy"
            />
            {% endif %} {% endif %}
        </div>
        <div class="grid-content">
            <h2><a href="{{ post.url }}">{{ post.data.title }}</a></h2>
            <time datetime="{{ post.date | w3DateFilter }}" class="small">
                {{ post.date | dateFilter }}
            </time>
        </div>
    </li>
    {%- endif -%}
    {%- endfor -%}
</ul>

<style>
    .post-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 2rem;
        padding: 0;
        margin: 0;
        list-style: none;
    }

    .grid-card {
        border: 1px solid #ddd;
        border-radius: 8px;
        overflow: hidden;
    }

    .grid-image {
        width: 100%;
        overflow: hidden;
        margin: 0;
        padding: 0;
        display: block;
    }

    .grid-image p {
        margin: 0;
    }

    .grid-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        margin: 0;
        padding: 0;
    }

    .grid-content {
        padding: 0.7rem;
    }

    .grid-content h2 {
        margin: 0;
        font-size: 1.2rem;
    }

    .grid-content time {
        color: #666;
    }
</style>
